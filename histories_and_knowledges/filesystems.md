# 啥是文件系统

文件系统是一种用于向用户提供底层数据访问的机制。它将设备中的空间划分为特定大小的块（或者称为簇），一般每块512字节。数据存储在这些块中，大小被修正为占用整数个块。由文件系统软件来负责将这些块组织为文件和目录，并记录哪些块被分配给了哪个文件，以及哪些块没有被使用。

简单的理解，文件系统就是负责组织管理使用存储设备的（也可能是其他设备）。

文件系统中一般包含文件名、元数据、安全访问等几个要素。文件名就是好理解啦，是否限制文件名长度，是否可以使用特殊字符（如emoji），是否大小写敏感；元数据则是保存文件自身信息的一块数据，比如说文件的创建、修改、访问时间戳，文件所有者，访问权限等。

![](/assets/filesystem/windows_bad_filename.jpg)

Windows限制使用一些特殊的字符作为文件名

文件系统要是分类的话，按照存储设备的不同，可以分为磁盘文件系统、光盘文件系统等。

## 常见的文件系统
说了这么多概念性的东西，那么常见的有哪些文件系统呢？以最常见的磁盘文件系统为例，有：

* FAT （File Allocation Table）系列（包括 FAT16/FAT32 和 exFAT），
是目前最常用的文件系统（几乎所有操作系统都支持）。不过一个
显著的缺点是不支持大于4GiB的单个文件（exFAT支持）。

![](/assets/filesystem/fat32_4gb.jpg)

* NTFS（New Technology File System），广泛用于 Windows 中的一种文件系统。

* 此外在 macOS 中也先后使用过 HFS（Hierarchical File System）、HFS+ 和 APFS 文件系统。

## GNU/Linux 中常见的文件系统
那 GNU/Linux 中常见的文件系统有哪些咧？

* ext系列（extended filesystem），是 GNU/Linux 中最常见的文件系统（因为是 Linux 内核支持的第一个文件系统嘛）。现在已经升级到 ext4 啦~ <s>又不是不能用</s>……

* Btrfs （B-tree檔案系統，通常念成Butter FS，Better FS或B-tree FS），以取代 ext3/4 为目标，追加了诸如快照，子卷和写时复制等等新鲜玩意。<s>就是感觉要凉……</s>

* xfs，一个 64 位文件系统，性能优秀（除了删除大量小文件……）。<s>有一批志愿传教士……</s>

* zfs，128 位文件系统怕不怕啊（雾），要不是 Sun/Orcale 非要用啥 CDDL 估计已经在 Linux 内核主线里了……

    汝要问咱推荐哪一个？其实哪一个都差不多（反正该做的备份还是要做就是啦）

    <s>要是遇到 xfs 卫道士的话那就……</s> \#此处应有斜眼

